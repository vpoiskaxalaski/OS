#include "stdafx.h"

//	c:\\Test1\\file1.txt
//	c:\\Test1\\

int _tmain(int argc, _TCHAR* argv[])
{
	TCHAR Buffer[256] = TEXT("Text to test working Lab14");
	TCHAR CatalogName[] = TEXT("C:\\Test1");
	TCHAR CatalogName1[] = TEXT("Catalog1");
	TCHAR CatalogName2[] = TEXT("Catalog2");

	BOOL b = SetCurrentDirectory(CatalogName);

	CreateDirectory(CatalogName1, NULL);
	CreateDirectory(CatalogName2, NULL);
	HANDLE hOut = CreateFile(TEXT("C:\\Test1\\Catalog1\\file.txt"), GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
	WriteFile(hOut, Buffer, 256, NULL, NULL);
	CloseHandle(hOut);
	BOOL pr2 = 0;

	CopyFile(TEXT("C:\\Test1\\Catalog1\\file.txt"), TEXT("C:\\Test1\\Catalog2\\file.txt"), pr2);
	DeleteFile(TEXT("C:\\Test1\\Catalog1\\file.txt"));

	MoveFile(TEXT("C:\\Test1\\Catalog2\\file.txt"), TEXT("C:\\Test1\\Catalog2\\filenew.txt"));

	auto hIn = CreateFile(TEXT("C:\\Test1\\Catalog2\\filenew.txt"), GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);

	TCHAR Buffer2[256];
	DWORD dwNumberOfBytes;
	ReadFile(hIn, Buffer2, 256, &dwNumberOfBytes, NULL);
	wcout << "Read: " << Buffer2 << '\n';

	cout << "Press something please - i want to sleep" << endl;
	getchar();

	return 0;
}